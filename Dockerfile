# Базовый образ: Python 3.12.2 на базе Debian Bullseye (облегченная версия)
# slim-вариант содержит минимум необходимых пакетов, что уменьшает размер образа
FROM python:3.12.2-slim-bullseye

# Отключение буферизации вывода Python
# Это гарантирует, что логи приложения будут немедленно видны в контейнере
# без задержек из-за буферизации
ENV PYTHONUNBUFFERED=1

# Установка рабочей директории внутри контейнера
# Все последующие команды будут выполняться относительно этой директории
WORKDIR /app

# Копирование всех файлов из текущей директории хоста в /app контейнера
# Включает код бота, конфигурационные файлы и requirements.txt
COPY . /app/

# Обновление pip до последней версии
# Это помогает избежать проблем совместимости при установке пакетов
RUN pip install --upgrade pip

# Установка всех зависимостей из файла requirements.txt
# Все необходимые Python-пакеты будут установлены внутри контейнера
RUN pip install -r requirements.txt

# Команда, которая запускается при старте контейнера
# Запускает основной файл бота main.py
CMD ["python", "main.py"]
